---
title: "블랙젝 게임 회고"
description: "도메인 지식이 없을 경우 커뮤니케이션 비용을 어떻게 줄일 것인가?"
time: 2024-03-09 20:50:27
tags:
  - wootechco
---

# 블랙젝 게임

3번째 미션은 블랙젝 게임이다. 블랙젝을 해본적이 없어서 규칙을 이해하면서 코드를 작성하는 것이 어려웠다. 또한, 이전 미션과 다르게 한 번에 입 출력을 처리하는 게 아니라, 플레이어의 수 만큼 Hit or Stay를 하는 입력이 들어오고 초기 게임 상태와 마지막 게임상태 및 승패를 처리하는 부분이 있어서 고민을 많이 했다.

이번엔 도메인과 UI의 의존성을 끊기 위해 DTO를 사용해봤다. 잘 썼는지는 모르겠으나 리뷰어가 

## 게임 규칙

블랙젝 게임은 `딜러` 와 `플레이어`들이  52장의 `트럼프 카드`를 가지고 하는 게임이다.

카드 각각에는 점수가 있다. 2~10은 차례대로 2~10의 점수를 가지며 `J` `Q` `K`는 10 점의 점수를 가진다. 
그리고 특수카드 `ACE`가 있으며, 1 또는 11로 계산할 수 있다.

맨 처음 `딜러`와 `플레이어`들은 카드 2장을 받고 시작한다. 딜러의 카드 1장은 공개하지 않는다. 그 이후 각 `플레이어`들은 차례대로 카드를 더 받을 것인지 아니면 지금의 패를 계속 가지고 있을 것인지 선택한다. 

카드를 뽑다가 21을 넘어버리면 `Bust`가 발동 되었다고 하며, **카드를 더이상 받을 수 없게 되고 무조건 게임에서 지는 상태가 된다.** 

`플레이어`들의 차례가 끝나면 `딜러`의 카드의 점수가 17을 넘을때 까지 카드를 뽑는다.

마지막으로 `딜러`와 `플레이어`들의 점수를 비교한다. `플레이어`는 `딜러`보다 21에 근접할 경우 게임에서 승리하고, `Bust` 또는 `딜러`가 `플레이어`보다 21의 점수에 가까울 경우 지게된다. 

21의 점수를 `블랙젝`이라고 하며 `딜러`가 `블랙젝`일 경우 `플레이어`가 같은 `블랙젝`이 아닐경우 무조건 `플레이어`들이 지게 된다.

`딜러`도 점수가 16이하일 경우 무조건 카드를 뽑아야 하기 때문에 `Bust`가 나올수 있다. 만약 `딜러`가 `Bust`가 나올 경우 아래의 경우에 따라 `플레이어`의 승패가 결정된다.

```
딜러: Bust, 플레이어: Bust가 아니면 플레이어의 승
딜러: Bust, 플레이어: Bust이면 딜러의 승
```

### 커뮤니케이션 비용을 줄이려면 도메인 용어를 찾아봐야 한다.

위의 글에서 아래와 같이 플레이어의 행위를 정의했다.

> 카드를 더 받을 것인지 아니면 지금의 패를 계속 가지고 있을 것인지 선택한다. 

블랙젝 게임에선 카드를 받는 행위를 Hit라고 하고, 그대로 가지고 있는 것을 Stay라고 한다. 이를 적용한다면 아래 처럼 커뮤니케이션이 간결해진다. 

> 플레이어는 Hit 또는 Stay를 선택한다.

동료와 이야기 할 때 이런 부분을 놓친 것 같다. 동료와 필자는 도메인 지식이 없는 상태였기 때문에 풀어서 설명할 수 밖에 없었다. 프로그램을 초기에 설계할 때 도메인 용어를 숙지하면 초반엔 느리게 가더라도 시간이 지날 수록 커뮤니케이션 비용이 감소되는 효과가 있을 것 같다.
