---
title: "좋은 설계 그리고 실패한 이유"
description: "데이터 중심이 아닌 설계 중심으로 해야 한다."
time: 2023-12-03 22:57:50
tags:
  - diary
  - positive
---

좋은 설계의 지표 // 캡슐화, 응집도, 결합도


캡슐화 - 내부 구현을 외부로 부터 잘 감추어져 있는가?

상태 중심 설계에는 내부 구현을 외부로 부터 감추어 있지 않는다 getter setter를 통해 내부 데이터를 외부에서 변경할 수 있기 때문이다.

반면 책임 중심 설계는 책임에 대한 부분이 외부에 들어나있기 때문에 데이터의 상태에 접근하기 힘들다.

구현과 인터페이스

구현 : 변경될 가능성이 높은 부분 (비율 정책, 금액 정책)
인터페이스 : 상대적으로 변경되지 않는 부분 (할인 정책)

캡슐화를 하면 두려움 없이, 주저함 없이, 저항감 없이 코드를 변경할 수 있는 능력이다.

응집도 : 모듈에 포함된 내부 요소들이 하나의 목적을 위해 긴밀히 연결되어있는 정도

결합도 : 의존성의 정도 객체의 세부 요소까지 꼼꼼히 알고있다면, 결합도가 강한느낌임


좋은 설계란 오늘 기능을 수행하면서 내일 변경을 수용할 수 있는 설계이다. -> 높은 응집도와 낮은 결합도를 추구해야 한다.

높은 응집도와 낮은 결합도를 추구하는 방법은 캡슐화이다. -> 협력만을 고려하고, 내부의 구조를 숨겨라

자신의 책임 다른 역할에 위임하면 높은 결합도를 가지게 된다.

ractangle 상태값을 외부에서 저장할 수 있도록 구성하지 않고, 상태값을 어떠한 규칙으로 변경할 것인지를 ractangle 스스로 정할 수 있도록 넣어라

캡슐화라는 의미가 내부에 어떤 데이터를 숨기라는 의미도 있지만, 이 책에선 좀 더 넓게 설명하고 있다. **개념 자체도 추상화 할 수 있으면 그것 또한 캡슐화라고 표현하나보다**.

너무 구현에만 집중하고 있었고, 인터페이스에 대해 집중하지 않았다.

그냥 버스 노선 도착시간도 이렇게 쓰면 좋을 것을 (이런 역할이 맞나 싶다. arrivalTime을 호출하기 위해 저장하고 있는 Route 상태값이 필요하기 때문이다.)

``` java title="버스 예상 도착시간 구하기"
interface BusStop {
    ArrivalTime arrivalTime();
}

interface Route {
    Time busArrivalTime(BusStop busstop);
}
```

딱 여기서 끝낸다. 이른 판단이 굳어진 설계로 이어진다고 한다.