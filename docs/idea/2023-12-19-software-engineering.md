---
title: "퍼블릭 인터페이스를 설계하는 원칙"
description: "객체와 책임을 분리하는데 도움을 주는 생각들"
time: 2023-12-19 16:47:01
tags:
  - java
  - software-engineering
---

## 퍼블릭 인터페이스 설계 원칙

<<오브젝트>>에서의 설계 원칙의 기본은 적절한 책임을 정의한 후 누구에게 주어질 것인지 배치하는 것이다. 이 글에선 책임주도개발을 도와주는 설계 원칙들을 소개한다. 

### 디미터의 법칙

객체 끼리는 내부 구조를 알고 있으면 안된다는 원칙이다. 예로들어 A,B 친구가 있을때, B에게 C를 불러라 라는 메시지가 정의되어 있고 C는 그림 그려라 라는 메시지가 정의되어 있는 상황이 있다고 하자. B와 C가 어떤 사건의 계기로 서로 멀어져 B와 C의 관계가 끊어졌으면, A는 더이상 B를 통해 C를 호출하지 못하는 상황이 된다. 디미터의 법칙이란 A입장에선 B가 어떤 친구를 만나는지 알면 안되고 B에게 메시지를 보내야 하는 원칙이다. 이를 해결하기 위해선 B를 아예 배제하고 C와 통신하도록 변경하거나, B에게 그림그려라 라는 메시지를 보내도록 수정하는 것이 변경이 쉽고 유연해 진다는 뜻이다.

####  디미터의 법칙 예외 (책임이 분산되어 있을 경우 책임을 합치는 방향으로 모은다)

제 3자를 배제할 수 없는 노릇이 있다. a 라는 요구사항이 추가가 되었을 때, a를 해결하기 위해 하나의 메소드 또는 클래스에서 이를 해결해야지 디미터의 법칙 때문에 책임을 나눠서 관리하면 객체들 끼리의 응집도가 낮아져 유지보수하기 어렵게 변화한다. 따라서, 완벽히 들어맞는 법칙은 없으며, 중요한 건 책임을 누가 담당할 것인지 최소화 하는 것이 중요하다.   

### 묻지 말고 시켜라

객체 A와 B가 있다고 한다. A는 B의 상태에 따라 b 메시지를 실행한다고 한다. 묻지 말고 시켜라는, B의 상태와 상관 없이 B 안에서 하나의 메시지로 묶어 처리하는 것을 원칙으로 둔다. 따라서 A는 B가 b 메시지를 가지고 있는것만 알고, B 안에서 상태에 따라 다른 결과값이 나타나도록 변경하여 A와 B의 의존성을 좀 더 낮추어 유연해질 수 있는 코드를 얻을 수 있게 된다.

#### 묻지 말고 시켜라 예외 (묻는 메시지만 있는 경우)

결과 값을 받지 않고 묻는 메시지만 있을 경우 `묻지 말고 시켜라`원칙을 예외로 처리하는 것이 맞다고 생각한다. 묻는 것 자체가 목적이라면 굳이 시키는게 없더라도, 하나의 메시지로서 동작하기에 손색이(?) 없을 것이라 생각한다.

### 의도를 드러내는 인터페이스

메시지를 선택하는 것은 클라이언트 관점에서 메시지를 정의하는 것이다. 객체 자체로 메시지를 정하는 것이아니라, 클라이언트가 상대방에게 어떤 메시지를 전달할 것인지 먼저 생각하자.

### 명령-쿼리 분리 원칙

상태를 변경하는 코드와, 상태를 변경하지 않고 계산하는 코드의 정의를 분리하자. 그리고, 메시지 네이밍에도 상태값이 변경되는지, 조회만 하는 것인지에 대해서도 명확히 드러나야 프로그램의 동작을 예측하는데 도움이 된다고 한다.

